## 2025-05-20 - Client-side DOM Injection Overhead
**Learning:** This codebase relies on an interesting hybrid architecture: static HTML generation on the backend, followed by client-side JavaScript injecting elements (like "Copy Citation" buttons and external links) post-load. I discovered that `injectCopyButtons` attaches individual event listeners to every single dynamically injected button, leading to O(N) memory overhead and potential initialization blocking as the publication list grows. Furthermore, the search functionality (`filterPubs`) was querying the DOM for `.type-heading` elements on every single keystroke and updating `.style.display` unconditionally, which causes layout thrashing.
**Action:** When working with architecture that injects identical interactive elements into long lists client-side, always use event delegation on a common parent container rather than attaching O(N) listeners. When implementing real-time search filtering, cache static DOM nodes (like headings) alongside search indices and perform conditional style updates (e.g., `if (el.style.display !== target) el.style.display = target`) to prevent layout thrashing and unnecessary repaints.
